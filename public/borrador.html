        <nav class="app-header navbar navbar-expand bg-body">
            <!--begin::Container-->
            <div class="container-fluid">
                <!--begin::Start Navbar Links-->
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
                            <i class="bi bi-list"></i>
                        </a>
                    </li>
                    <li class="nav-item d-none d-md-block"><a href="#" class="nav-link">Home</a></li>
                    <!-- <li class="nav-item d-none d-md-block"><a href="#" class="nav-link">Contact</a></li> -->
                </ul>
                <!--end::Start Navbar Links-->
                <!--begin::End Navbar Links-->
                <ul class="navbar-nav ms-auto">
                    <!--begin::Navbar Search-->
                    <!-- <li class="nav-item">
                        <a class="nav-link" data-widget="navbar-search" href="#" role="button">
                            <i class="bi bi-search"></i>
                        </a>
                    </li> -->
                    <!--end::Navbar Search-->

                    <!--begin::Messages Dropdown Menu-->
                    <li class="nav-item dropdown">
                        <a class="nav-link" data-bs-toggle="dropdown" href="#">
                            <i class="bi bi-chat-text"></i>
                            <span class="navbar-badge badge text-bg-danger">3</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                            <a href="#" class="dropdown-item">
                                <!--begin::Message-->
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <img src="dist/images/user1-128x128.jpg" alt="User Avatar"
                                            class="img-size-50 rounded-circle me-3" />
                                    </div>
                                    <div class="flex-grow-1">
                                        <h3 class="dropdown-item-title">
                                            Brad Diesel
                                            <span class="float-end fs-7 text-danger"><i
                                                    class="bi bi-star-fill"></i></span>
                                        </h3>
                                        <p class="fs-7">Call me whenever you can...</p>
                                        <p class="fs-7 text-secondary">
                                            <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                                        </p>
                                    </div>
                                </div>
                                <!--end::Message-->
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <!--begin::Message-->
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <img src="dist/images/user8-128x128.jpg" alt="User Avatar"
                                            class="img-size-50 rounded-circle me-3" />
                                    </div>
                                    <div class="flex-grow-1">
                                        <h3 class="dropdown-item-title">
                                            John Pierce
                                            <span class="float-end fs-7 text-secondary">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </h3>
                                        <p class="fs-7">I got your message bro</p>
                                        <p class="fs-7 text-secondary">
                                            <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                                        </p>
                                    </div>
                                </div>
                                <!--end::Message-->
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item">
                                <!--begin::Message-->
                                <div class="d-flex">
                                    <div class="flex-shrink-0">
                                        <img src="dist/images/user3-128x128.jpg" alt="User Avatar"
                                            class="img-size-50 rounded-circle me-3" />
                                    </div>
                                    <div class="flex-grow-1">
                                        <h3 class="dropdown-item-title">
                                            Nora Silvester
                                            <span class="float-end fs-7 text-warning">
                                                <i class="bi bi-star-fill"></i>
                                            </span>
                                        </h3>
                                        <p class="fs-7">The subject goes here</p>
                                        <p class="fs-7 text-secondary">
                                            <i class="bi bi-clock-fill me-1"></i> 4 Hours Ago
                                        </p>
                                    </div>
                                </div>
                                <!--end::Message-->
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                        </div>
                    </li>
                    <!--end::Messages Dropdown Menu-->
                    <!--begin::Notifications Dropdown Menu-->
                    <!-- 🔹 Dropdown con asistente de voz -->
                    <!-- 🔹 Dropdown del Asistente con Avatar -->
                    <!-- 🔹 Dropdown del Asistente con Avatar -->
                    <li class="nav-item dropdown">
                        <a class="nav-link d-flex align-items-center" data-bs-toggle="dropdown" href="#" role="button"
                            aria-expanded="false" style="padding: 0 8px;">
                            <!-- Avatar reemplaza el ícono de campana -->
                            <div style="position: relative; display: inline-block;">
                                <img id="avatarAudio" src="/dist/images/avatar-neutral.svg" alt="Asistente KPI" style="width:38px; height:38px; border-radius:50%; cursor:pointer;
        box-shadow:0 0 4px rgba(0,0,0,0.25); transition:transform 0.2s;">
                                <button id="btnDetenerVoz" style="display:none; position:absolute; bottom:-4px; right:-4px; border:none; border-radius:50%;
        width:20px; height:20px; background:#dc3545; color:white; font-weight:bold;
        cursor:pointer; font-size:12px; line-height:18px;">
                                    ✕
                                </button>
                            </div>
                        </a>

                        <div class="dropdown-menu dropdown-menu-lg dropdown-menu-end">
                            <span class="dropdown-item dropdown-header fw-semibold text-secondary">
                                Tu asistente personal
                            </span>
                            <div class="dropdown-divider"></div>

                            <!-- 🔊 Ítem con audio asociado -->
                            <a href="#" class="dropdown-item audio-item" data-audio="destinos">
                                <i class="bi bi-geo-alt-fill me-2"></i> Los Destinos
                                <span class="float-end text-secondary fs-7">3 mins</span>
                                <i class="bi bi-volume-up-fill ms-2 icon-speaking"
                                    style="display:none; color:#0d6efd;"></i>
                            </a>

                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item audio-item" data-audio="usuarios">
                                <i class="bi bi-people-fill me-2"></i> Los usuarios
                                <span class="float-end text-secondary fs-7">1 min</span>
                                <i class="bi bi-volume-up-fill ms-2 icon-speaking"
                                    style="display:none; color:#0d6efd;"></i>
                            </a>

                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item audio-item" data-audio="indicadores">
                                <i class="bi bi-file-earmark-fill me-2"></i> Los indicadores
                                <span class="float-end text-secondary fs-7">2 mins</span>
                                <i class="bi bi-volume-up-fill ms-2 icon-speaking"
                                    style="display:none; color:#0d6efd;"></i>
                            </a>

                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item dropdown-footer text-center">Ver todas las secciones</a>
                        </div>
                    </li>

                    <!-- 🔘 Botón flotante para detener -->
                    <button id="btnStopAudio" style="display:none; position:fixed; bottom:20px; right:20px; border:none;
  border-radius:50%; width:50px; height:50px; background:#dc3545;
  color:white; font-size:22px; box-shadow:0 0 10px rgba(0,0,0,0.3);
  cursor:pointer; z-index:1055;">
                        <i class="bi bi-stop-fill"></i>
                    </button>


                    <style>
                        /* 🔊 Animación del ícono de audio mientras habla */
                        .audio-icon.speaking {
                            display: inline-block !important;
                            animation: pulseAudio 1s infinite;
                            color: #0d6efd;
                        }

                        @keyframes pulseAudio {
                            0% {
                                transform: scale(1);
                                opacity: 1;
                            }

                            50% {
                                transform: scale(1.4);
                                opacity: 0.6;
                            }

                            100% {
                                transform: scale(1);
                                opacity: 1;
                            }
                        }
                    </style>

<script>
  const btnStopAudio = document.getElementById('btnStopAudio');
  const avatarAudio = document.getElementById('avatarAudio');
  let vozSeleccionada = null;
  let utteranceActual = null;

  const audiosExplicativos = {
    destinos: "¡Hola! En esta sección se definen los destinos a los que se les asignarán indicadores. Son unidades, procesos o áreas pasibles de medición. ¡Comencemos!",
    usuarios: "Aquí podrás gestionar los usuarios del sistema, asignarles permisos y roles.",
    indicadores: "En esta sección se administran los indicadores que permiten medir el desempeño de los destinos definidos."
  };

  function obtenerVozEspañol() {
    const voces = speechSynthesis.getVoices();
    if (!voces.length) return null;
    const vozGoogle = voces.find(v => v.name.toLowerCase().includes("google") && v.lang.startsWith("es"));
    const vozEspañol = voces.find(v => v.lang.startsWith("es"));
    vozSeleccionada = vozGoogle || vozEspañol || voces[0];
    return vozSeleccionada;
  }

  function hablarTexto(texto, item) {
    detenerAudio();
    if (!('speechSynthesis' in window)) {
      alert('Tu navegador no soporta la función de voz.');
      return;
    }

    utteranceActual = new SpeechSynthesisUtterance(texto);
    utteranceActual.voice = obtenerVozEspañol();
    utteranceActual.lang = 'es-ES';
    utteranceActual.rate = 1;
    utteranceActual.pitch = 1.05;

    const icono = item.querySelector('.icon-speaking');
    if (icono) icono.style.display = 'inline';

    utteranceActual.onstart = () => {
      avatarAudio.classList.add('speaking');
      btnStopAudio.style.display = 'block';
    };

    utteranceActual.onend = () => {
      if (icono) icono.style.display = 'none';
      detenerAudio();
    };

    utteranceActual.onerror = (e) => {
      console.error('Error en TTS:', e);
      detenerAudio();
    };

    speechSynthesis.speak(utteranceActual);
  }

  function detenerAudio() {
    if (speechSynthesis.speaking) {
      speechSynthesis.cancel();
    }
    document.querySelectorAll('.icon-speaking').forEach(i => i.style.display = 'none');
    avatarAudio.classList.remove('speaking');
    btnStopAudio.style.display = 'none';
  }

  // Evita que se cierre el dropdown y lanza el audio
  document.querySelectorAll('.dropdown-menu .audio-item').forEach(item => {
    item.addEventListener('click', e => {
      e.preventDefault();
      e.stopPropagation(); // ❗ Evita que Bootstrap cierre el menú
      const clave = item.dataset.audio;
      const texto = audiosExplicativos[clave];
      if (texto) hablarTexto(texto, item);
    });
  });

  btnStopAudio.addEventListener('click', detenerAudio);
  window.speechSynthesis.onvoiceschanged = obtenerVozEspañol;
</script>

<style>
  #avatarAudio.speaking {
    animation: pulse 1.2s infinite;
    transform: scale(1.05);
  }

  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(13,110,253,0.4); }
    70% { box-shadow: 0 0 0 10px rgba(13,110,253,0); }
    100% { box-shadow: 0 0 0 0 rgba(13,110,253,0); }
  }

  .icon-speaking {
    animation: pulseAudio 1.2s infinite;
  }

  @keyframes pulseAudio {
    0% { opacity: 0.5; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
    100% { opacity: 0.5; transform: scale(1); }
  }
</style>


                    <!--end::Notifications Dropdown Menu-->

                    <!--begin::Fullscreen Toggle-->
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-lte-toggle="fullscreen">
                            <i data-lte-icon="maximize" class="bi bi-arrows-fullscreen"></i>
                            <i data-lte-icon="minimize" class="bi bi-fullscreen-exit" style="display: none"></i>
                        </a>
                    </li>
                    <!--end::Fullscreen Toggle-->

                    <!--begin::User Menu Dropdown"-->
                    <li class="nav-item dropdown1 user-menu">

                        <span class="nav-link dropdown-toggle">
                            <span class="nav-link d-none d-md-inline">Bienvenido, <strong>Daniel González
                                    (ADM)</strong></span>
                            <img src="/dist/images/user6-128x128.jpg" class="user-image rounded-circle shadow"
                                style="width: 40px; height: 40px;" alt="User Image" />
                        </span>
                    </li>
                    <!--end::User Menu Dropdown-->

                    <li>
                        <!-- <a href="#" class="btn btn-default btn-flat float-end"> Salir</a> -->
                        <a href="#" class="nav-link " data-bs-toggle="modal" data-bs-target="#logoutModal">
                            <i class="fas fa-sign-out-alt me-1"></i> Salir
                        </a>
                    </li>
                    <!--end::User Menu Dropdown-->
                </ul>
                <!--end::End Navbar Links-->
            </div>
            <!--end::Container-->
        </nav>